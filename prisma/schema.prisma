generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Player {
  id          String   @id @default(cuid())
  name        String
  alias       String?
  scouting    Float    @default(0) // Average score 1-5
  skills      String?  // JSON stringified skills
  group       Group    @relation(fields: [groupId], references: [id])
  groupId     String
  matches     Participation[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Group {
  id          String   @id @default(cuid())
  name        String
  players     Player[]
  matches     Match[]
  createdAt   DateTime @default(now())
}

model Match {
  id          String   @id @default(cuid())
  date        DateTime
  location    String?
  group       Group    @relation(fields: [groupId], references: [id])
  groupId     String
  teamA       String?  // JSON stringified team A
  teamB       String?  // JSON stringified team B
  scoreA      Int?
  scoreB      Int?
  motivation  String?  // AI generated motivation
  coverUrl    String?  // AI generated cover
  participations Participation[]
  createdAt   DateTime @default(now())
}

model Participation {
  id        String @id @default(cuid())
  match     Match  @relation(fields: [matchId], references: [id])
  matchId   String
  player    Player @relation(fields: [playerId], references: [id])
  playerId  String
  team      String? // "A" or "B"
  isGuest   Boolean @default(false)
}
